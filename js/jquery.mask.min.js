// jQuery Mask Plugin v1.7.1
// github.com/igorescobar/jQuery-Mask-Plugin
(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):g(window.jQuery||window.Zepto)})(function(g){var z=function(a,d,c){var h=this,q,m;a=g(a);d="function"===typeof d?d(a.val(),void 0,a,c):d;h.init=function(){c=c||{};h.byPassKeys=[9,16,17,18,36,37,38,39,40,91];h.translation={0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}};h.translation=g.extend({},h.translation,c.translation);h=g.extend(!0,{},h,c);m=
b.getRegexMask();a.each(function(){!1!==c.maxlength&&a.attr("maxlength",d.length);c.placeholder&&a.attr("placeholder",c.placeholder);a.attr("autocomplete","off");b.destroyEvents();b.events();var f=b.getCaret();b.val(b.getMasked());b.setCaret(f+b.getMaskCharactersBeforeCount(f,!0))})};var b={getCaret:function(){try{var f,n=0,b=a.get(0),e=document.selection,d=b.selectionStart;if(e&&!~navigator.appVersion.indexOf("MSIE 10"))f=e.createRange(),f.moveStart("character",a.is("input")?-a.val().length:-a.text().length),
n=f.text.length;else if(d||"0"===d)n=d;return n}catch(c){}},setCaret:function(f){try{if(a.is(":focus")){var n,b=a.get(0);b.setSelectionRange?b.setSelectionRange(f,f):b.createTextRange&&(n=b.createTextRange(),n.collapse(!0),n.moveEnd("character",f),n.moveStart("character",f),n.select())}}catch(e){}},events:function(){a.on("keydown.mask",function(){q=b.val()}).on("keyup.mask",b.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){a.keydown().keyup()},100)}).on("change.mask",function(){a.data("changeCalled",
!0)}).on("blur.mask",function(){q===a.val()||a.data("changeCalled")||a.trigger("change");a.data("changeCalled",!1)}).on("focusout.mask",function(){c.clearIfNotMatch&&!m.test(b.val())&&b.val("")})},getRegexMask:function(){for(var f=[],a,b,e,c,k=0;k<d.length;k++)(a=h.translation[d[k]])?(b=a.pattern.toString().replace(/.{1}$|^.{1}/g,""),e=a.optional,(a=a.recursive)?(f.push(d[k]),c={digit:d[k],pattern:b}):f.push(e||a?b+"?":b)):f.push("\\"+d[k]);f=f.join("");c&&(f=f.replace(RegExp("("+c.digit+"(.*"+c.digit+
")?)"),"($1)?").replace(RegExp(c.digit,"g"),c.pattern));return RegExp(f)},destroyEvents:function(){a.off("keydown keyup paste drop change blur focusout DOMNodeInserted ".split(" ").join(".mask ")).removeData("changeCalled")},val:function(f){var b=a.is("input");return 0<arguments.length?b?a.val(f):a.text(f):b?a.val():a.text()},getMaskCharactersBeforeCount:function(f,a){for(var b=0,e=0,c=d.length;e<c&&e<f;e++)h.translation[d.charAt(e)]||(f=a?f+1:f,b++);return b},determineCaretPos:function(a,c,g,e){return h.translation[d.charAt(Math.min(a-
1,d.length-1))]?Math.min(a+g-c-e,g):b.determineCaretPos(a+1,c,g,e)},behaviour:function(a){a=a||window.event;var c=a.keyCode||a.which;if(-1===g.inArray(c,h.byPassKeys)){var d=b.getCaret(),e=b.val(),p=e.length,k=d<p,r=b.getMasked(),l=r.length,m=b.getMaskCharactersBeforeCount(l-1)-b.getMaskCharactersBeforeCount(p-1);r!==e&&b.val(r);!k||65===c&&a.ctrlKey||(8!==c&&46!==c&&(d=b.determineCaretPos(d,p,l,m)),b.setCaret(d));return b.callbacks(a)}},getMasked:function(a){var g=[],m=b.val(),e=0,p=d.length,k=0,
r=m.length,l=1,q="push",t=-1,s,v;c.reverse?(q="unshift",l=-1,s=0,e=p-1,k=r-1,v=function(){return-1<e&&-1<k}):(s=p-1,v=function(){return e<p&&k<r});for(;v();){var w=d.charAt(e),x=m.charAt(k),u=h.translation[w];if(u)x.match(u.pattern)?(g[q](x),u.recursive&&(-1===t?t=e:e===s&&(e=t-l),s===t&&(e-=l)),e+=l):u.optional&&(e+=l,k-=l),k+=l;else{if(!a)g[q](w);x===w&&(k+=l);e+=l}}a=d.charAt(s);p!==r+1||h.translation[a]||g.push(a);return g.join("")},callbacks:function(f){var g=b.val(),h=b.val()!==q;if(!0===h&&
"function"===typeof c.onChange)c.onChange(g,f,a,c);if(!0===h&&"function"===typeof c.onKeyPress)c.onKeyPress(g,f,a,c);if("function"===typeof c.onComplete&&g.length===d.length)c.onComplete(g,f,a,c)}};h.remove=function(){b.destroyEvents();b.val(h.getCleanVal()).removeAttr("maxlength");b.setCaret(b.getCaret()-b.getMaskCharactersBeforeCount(caret))};h.getCleanVal=function(){return b.getMasked(!0)};h.init()},m=function(){var a=g(this),d={};"true"===a.attr("data-mask-reverse")&&(d.reverse=!0);"false"===
a.attr("data-mask-maxlength")&&(d.maxlength=!1);"true"===a.attr("data-mask-clearifnotmatch")&&(d.clearIfNotMatch=!0);a.mask(a.attr("data-mask"),d)},y={};g.fn.mask=function(a,d){this.unmask();var c=this.selector,h=function(){g(this).data("mask",new z(this,a,d))};c&&!y[c]&&(y[c]=!0,setTimeout(function(){g(document).on("DOMNodeInserted.mask",c,h)},500));return this.each(h)};g.fn.unmask=function(){return this.each(function(){try{g(this).data("mask").remove()}catch(a){}})};g.fn.cleanVal=function(){return g(this).data("mask").getCleanVal()};
g("*[data-mask]").each(m);g(document).on("DOMNodeInserted.mask","*[data-mask]",m)});
